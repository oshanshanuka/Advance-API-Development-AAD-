<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ajax Example</title>
    <style>
        table{
            display: none;
            width: 100%;
            border-collapse: collapse;
        }
        th,td{
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th{
            background-color: #d26d6d;
        }
    </style>
</head>
<body>
<h1>This is an example for Ajax</h1>
<p id="para">This paragraph is for an example</p>
<button id="btn">Click here</button>
<img id="new">
<!--<section>-->
<!--    <h3 id="user">User ID</h3>-->
<!--    <h3 id="id">id</h3>-->
<!--    <h3 id="title">Title</h3>-->
<!--    <h3 id="body">Body</h3>-->

<!--</section>-->
<section id="table">
    <table id="tbl">
        <thead>
        <tr>
            <th>User ID</th>
            <th>ID</th>
            <th>Title</th>
            <th>Body</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td id="user"></td>
            <td id="id"></td>
            <td id="title"></td>
            <td id="body"></td>
        </tr>
        </tbody>
    </table>
</section>
<script src="../AJAX-Practical/js/jquery-3.7.1.min.js"></script>
<script>
    $("#btn").click(function(){
        $('#tbl').show();
        console.log('Request started');
        $.ajax({
            url: 'https://jsonplaceholder.typicode.com/posts',
            async: false,
            success: function(response) {
                var tbody = $('#tbl tbody');
                tbody.empty(); // Clear existing rows
                response.forEach(function(item) {
                    var row = '<tr>' +
                        '<td>' + item.userId + '</td>' +
                        '<td>' + item.id + '</td>' +
                        '<td>' + item.title + '</td>' +
                        '<td>' + item.body + '</td>' +
                        '</tr>';
                    tbody.append(row);
                });
                console.log('Data loaded successfully');
            },
            error: function(error) {
                console.log(error);
            }
        });
        console.log('Request finished');
    });
    // console.log("Button Clicked")
    // var http =new XMLHttpRequest();
    // console.log(http.readyState,'After theXMLHttpRequest object created');
    //fix the open state issue
    // http.open( 'GET','index.html');
    // http.send();

    // http.open('GET','images/Download GitHub Logo, Git Hub Icon On White Background.jpg');
    // http.open('GET','db/db.txt',false);
    // console.log(http.readyState,'After the open method');
    // console.log(http.responseType = 'blob');
    // console.log(http.readyState,'After the responsetext print');

    // http.send();
    // console.log(http.readyState,'After the send method');
    // http.onreadystatechange = function () {
    // console.log('test')
    //  console.log(http.readyState,'Inside on ready state Change Event');
    //  console.log(http.responseType);
    //     if(http.readyState === 4 && http.status === 200){
    //         //console.log(http.responseText);
    //         document.getElementById('para').innerText = http.responseType;
    //         // $('#new').attr('src','images/Download GitHub Logo, Git Hub Icon On White Background.jpg').show();
    //     }
    //     console.log(http.readyState);
    //     console.log(http.status);
    //     console.log(http.responseType);
    // }
    //     console.log('Request finished');
    // });
</script>
<script>
    //synchronous
    // console.log('1');
    // console.log('2');
    // console.log('3');


    //asynchronous
    // console.log('start');
    // setTimeout(()=>{
    //     console.log('Middle 1');
    // },2000);
    // setTimeout(()=>{
    //     console.log('Middle 2');
    // },5000);
    // console.log('End');



</script>
</body>
</html>